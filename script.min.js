let coins=0,knightCount=0,archerCount=0,wizardCount=0,woodcuttingLevel=1,miningLevel=1,paladinCount=0,passiveIncome=0,db,lastSaveTime=Date.now();document.write(`
<audio id="upgradeSound">
    <source src="upgradesound.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>
`);const clickSound=new Audio("click-sound.mp3");function disableFingerZooming(){document.addEventListener("touchmove",function(e){1!==e.scale&&e.preventDefault()},{passive:!1})}function initializeDB(){var e=indexedDB.open("MedievalClickerDB",1);e.onupgradeneeded=function(e){(db=e.target.result).objectStoreNames.contains("gameState")||db.createObjectStore("gameState")},e.onsuccess=function(e){db=e.target.result,loadGameData()},e.onerror=function(e){console.log("Error opening DB",e)}}function saveGameData(){var e={coins:coins,knightCount:knightCount,archerCount:archerCount,wizardCount:wizardCount,woodcuttingLevel:woodcuttingLevel,miningLevel:miningLevel,paladinCount:paladinCount,lastSaveTime:Date.now()};db.transaction(["gameState"],"readwrite").objectStore("gameState").put(e,"currentGameState")}function loadGameData(){const n=db.transaction(["gameState"],"readonly").objectStore("gameState").get("currentGameState");n.onsuccess=function(e){var t;n.result&&(t=n.result,coins=t.coins,knightCount=t.knightCount,archerCount=t.archerCount,wizardCount=t.wizardCount,woodcuttingLevel=t.woodcuttingLevel,miningLevel=t.miningLevel,paladinCount=t.paladinCount,lastSaveTime=t.lastSaveTime,updateUI())}}function toggleMusic(){var e=document.getElementById("medievaltheme");e.paused?e.play():e.pause()}function toggleSoundEffects(){var e=document.getElementById("click-sound"),t=document.getElementById("upgradeSound");document.getElementById("toggle-sfx").checked?(e.muted=!0,t.muted=!0):(e.muted=!1,t.muted=!1)}function requestFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function updateUI(){document.getElementById("counter").textContent="Gold coins: "+compactNumberFormat(coins),document.getElementById("knight-count").textContent=knightCount,document.getElementById("archer-count").textContent=archerCount,document.getElementById("wizard-count").textContent=wizardCount,document.getElementById("woodcutting-level").textContent=woodcuttingLevel,document.getElementById("mining-level").textContent=miningLevel,document.getElementById("paladin-count").textContent=paladinCount,updatePassiveIncome()}function clickCastle(){coins++,saveGameData(),updateUI(),clickSound.play()}function buyUpgrade(e){let t=0,n;switch(e){case"knight":t=10,n=knightCount,coins>=t&&(coins-=t,knightCount++);break;case"archer":t=25,n=archerCount,coins>=t&&(coins-=t,archerCount++);break;case"wizard":t=50,n=wizardCount,coins>=t&&(coins-=t,wizardCount++);break;case"paladin":t=100,n=paladinCount,coins>=t&&(coins-=t,paladinCount++)}0<t&&document.getElementById("upgradeSound").play(),saveGameData(),updateUI()}function compactNumberFormat(e){return e<1e3?e:1e3<=e&&e<1e6?+(e/1e3).toFixed(1)+"K":1e6<=e&&e<1e9?+(e/1e6).toFixed(1)+"M":1e9<=e&&e<1e12?+(e/1e9).toFixed(1)+"B":+(e/1e12).toFixed(1)+"T"}function handleSkillingClick(e){switch(e){case"woodcutting":woodcuttingLevel++;break;case"mining":miningLevel++}saveGameData(),updateUI()}function updatePassiveIncome(){var e=+knightCount+2*archerCount+4*wizardCount+8*paladinCount;passiveIncome=e}function earnPassiveIncome(){var e=Date.now(),t=e-lastSaveTime,t=Math.floor(passiveIncome*(t/1e3));coins+=t,lastSaveTime=e,saveGameData(),updateUI()}disableFingerZooming(),initializeDB(),document.getElementById("toggle-music").addEventListener("change",toggleMusic),document.getElementById("toggle-sfx").addEventListener("change",toggleSoundEffects),setInterval(earnPassiveIncome,1e3);